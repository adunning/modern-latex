\chapter{Fonts}
\label{fonts}

Digital type has changed almost entirely in the past thirty years.
Originally, \LaTeX{} used \MF,
a system designed by Donald Knuth specifically for \TeX{}.
As time went on, support for PostScript\footnote{One of
Adobe's original claims to fame,
PostScript is a language for defining and drawing computer graphics,
including type. It remains in use today.} fonts was added.
Today, \LuaLaTeX{} and \XeLaTeX{} offer support for the two formats you're
likely to encounter on your computer:
TrueType and OpenType.\punckern\footnote{Mac versions of \LaTeX{} also support
Apple's \acronym{aat}, but we'll limit ourselves here to the more ubiquitous
formats.}

\begin{description}
\item[TrueType] was developed by Apple and Microsoft in the late 1980s.
    Most of the fonts that come pre-installed on your system are likely
    in this format.
    TrueType files generally end in a \monobox{.ttf} extension.
\item[OpenType] was first released in 1996 by Microsoft and Adobe.
    One major improvement over TrueType is its ability to embed
    multiple versions of glyphs in a single font file.
    We'll see this feature in action through much of this chapter.
    OpenType files generally end in an \monobox{.otf} extension.
\end{description}

\section{Changing typefaces}

By default, \LuaLaTeX{} and \XeLaTeX{} use Latin Modern,
an OpenType rendition of \LaTeX's original type family, Computer Modern.
While Latin Modern is a high-quality set of fonts,
you may want to use others for your document.
This is done through the \texttt{fontspec} package:
\begin{leftfigure}
\begin{lstlisting}
\documentclass{article}

\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{Source Serif Pro}
\setsansfont[Ligatures=TeX]{Source Sans Pro}
\setmonofont{Source Code Pro}

\begin{document}
Hello, Source type family! Neat---no? \\
\sffamily Let's try sans serif! \\
\ttfamily Let's try monospaced!
\end{document}
\end{lstlisting}
\end{leftfigure}
should produce something like:\footnote{Assuming, of course,
that you have Adobe's open-source fonts installed.\punckern\endnote{Adobe's
open-source type is freely available at \url{https://github.com/adobe-fonts}.}}
\begin{leftfigure}
\fontspec[Ligatures=TeX]{Source Serif Pro} Hello, Source type family! Neat---no? \\
\fontspec[Ligatures=TeX]{Source Sans Pro} Let's try sans serif! \\
\fontspec{Source Code Pro} Let's try monospaced!
\end{leftfigure}
The \verb|Ligatures=TeX| option allows you to use the standard ligatures
mentioned in \chapref{punctuation} instead of characters that are
unlikely to be on your keyboard.
% No need repeating ourselves here?
%For example, \verb|---| can be used to create em dashes (—),
%quotes can be typed \verb|``like this''| instead of \verb|“like this”|,
%and so on.
You probably don't want this for your monospaced type, though,
since things set in it---such as code---are usually meant to be displayed
verbatim. You don't want \verb|"Hello!"| to turn into
\verb|“Hello!“|

\section{Selecting font files}

A typical typeface might come packaged as four files to represent its
weights and styles, usually
normal,
\textit{italics},
\textbf{bold}, and
\textit{\textbf{bold italics}}.
\texttt{fontspec} can generally deduce the appropriate file
names given the name of the typeface.\punckern\footnote{This is
one of the places \XeLaTeX{} and \LuaLaTeX{}
differ in a way that's noticeable to the casual user.
The former gernally uses system libraries---such as FontConfig on Linux---to
locate files, given a typeface's name.
The latter has its own font loader,
based on code from FontForge.\punckern\endnote{\textit{\LuaTeX{} Reference}
(February 2017, Version 1.0.4), 10.}
The expected name of a font might differ between the two engines---refer
to the \texttt{fontspec} manual for details.}
However, many typefaces come in more than two weights---some versions of Futura,
for example, come in
{\fontspec[Scale=MatchLowercase]{Futura-Lig}light},
{\fontspec[Scale=MatchLowercase]{Futura-Boo}book},
{\fontspec[Scale=MatchLowercase]{Futura-Med}medium},
{\fontspec[Scale=MatchLowercase]{Futura-Dem}demi},
{\fontspec[Scale=MatchLowercase]{Futura-Bol}bold}, and
{\fontspec[Scale=MatchLowercase]{Futura-ExtBol}extra bold}.
Sometimes
{\fontspec[Scale=MatchLowercase]{FuturaSc-Boo}\textsc{small caps}}
are stored as separate files as well.\punckern\footnote{OpenType allows
small caps to be placed in the same file(s) as the other glyphs.
If your font supports this, you don't need to do anything---\texttt{fontspec}
will dutifully switch to them whenever you use
\monobox{\textbackslash textsc} or \monobox{\textbackslash scshape}.
But for TrueType, and for OpenType fonts that don't take advantage of this
feature, you'll have to load a separate file as shown here.}

We might want to hand-pick weights to achieve a certain look or better match the
weights of other fonts in our document.\punckern\footnote{Consider how much
better {\fontspec[Scale=MatchLowercase]{Futura-Boo}the book weight} of Futura
blends in with the surrounding text compared to
{\fontspec[Scale=MatchLowercase]{Futura-Lig}light}
or
{\fontspec[Scale=MatchLowercase]{Futura-Med}medium}.}
Continuing to use Futura as an example,
say we want to use the ``book'' weight as our default
and ``demi'' for bold.
Assuming the font files are named:
\begin{itemize}
\item \monobox{Futura-Boo} for our
    {\fontspec[Scale=MatchLowercase]{Futura-Boo}upright book weight}
\item \monobox{Futura-BooObl} for our
    {\fontspec[Scale=MatchLowercase]{Futura-BooObl}oblique book weight}
\item \monobox{FuturaSC-Boo} for
    {\fontspec[Scale=MatchLowercase]{FuturaSC-Boo}small caps, book weight}
\item \monobox{Futura-Dem} for
    {\fontspec[Scale=MatchLowercase]{Futura-Dem}upright demi(bold)}
\item \monobox{Futura-DemObl} for
    {\fontspec[Scale=MatchLowercase]{Futura-DemObl}oblique demibold}
\end{itemize}

\newpage
\noindent Our font setup might resemble:
\begin{leftfigure}
\begin{lstlisting}
\usepackage{fontspec}
\setmainfont[
    Ligatures=TeX,
    UprightFont = *-Boo,
    ItalicFont = *-BooObl,
    SmallCapsFont = *SC-Boo,
    BoldFont = *-Dem,
    BoldItalicFont = *-DemObl
]{Futura}
\end{lstlisting}
\end{leftfigure}
Note that instead of typing out \monobox{Futura-Boo},
\monobox{Futura-BooObl}, and so on, we can use \texttt{*} to insert the base name.

\section{Scaling}

Using different typefaces to create a cohesive experience is tricky,
especially since---as mentioned in \chapref{formatting}---different typefaces
might look completely different at the same point size.
\texttt{fontspec} can help a bit here by scaling fonts to match either the
x-height or the cap height of your main font with
\verb|Scale=MatchLowercase| or \verb|Scale=MatchUppercase|,
respectively.\footnote{Another way to sidestep this issue is to user fewer
typefaces in your design. Even just one or two typefaces,
used carefully, can produce amazing results.}


\section{OpenType features}

As mentioned above, one of OpenType's defining features is the ability to store
multiple variations of a typeface's glyphs in a single file and allow users
to switch between them.
All of these features can be specified as an optional argument to
\verb|\setmainfont| and friends.
They can also be set for the current group with
\verb|\addfontfeature|.
Lets's touch on a few common ones.

\subsection{Ligatures}

Many typefaces use \introduce{ligatures}, where multiple characters are combined
into a single glyph.\punckern\footnote{Ligatures fell out
of style somewhat during the 20{\addfontfeature{VerticalPosition=Superior}th}
century due to limitations of printing technology---including early
computer typesetting---and the increased popularity of sans serif typefaces,
which often lack them.
Today they are making a comeback,
thanks in no small part to their support in OpenType.
\textbf{Trivia:} glyphs such as the ampersand
(\,\&\,) and the German Eszett (\,ß\,) evolved
from ligatures.}
OpenType groups ligatures into three categories:
\begin{description}
\item[Standard] ligatures are enabled by default, and remedy spacing problems
    a typeface might otherwise have. Consider the lowercase letters f
    and i.
    In many serif typefaces, these combine
    to form the ligature fi, which avoids awkward spacing between the
    ascender of f and the dot of i
    {\addfontfeature{Ligatures=CommonOff} (\,fi\,).}
    Other common examples in English writing include ff,
    ffi, fl, and ffl.
\item[Discretionary] ligatures, such as
    {\addfontfeature{Ligatures=Discretionary}ct},
    are offered by some fonts.
    They are disabled by default
    but can be enabled with
    \verb|Ligatures=Discretionary|.
\item[Historical] ligatures are ones which have fallen out of common use,
    such as those with a \introduce{long~s} (e.g.,
    {\fontspec[Scale=MatchLowercase, Ligatures={TeX,Historic}]{EB Garamond}ſt}).
    These are also disabled by default
    but can be enabled with \verb|Ligatures=Historic|.
\end{description}
In the likely event that you also want to use \verb|Ligatures=TeX|,
multiple options can be grouped together, e.g.,
\verb|Ligatures={TeX,Discretionary}|.
Ligatures can also be disabled using corresponding \verb|*Off|
options. If you wanted to temporarily disable discretionary ligatures,
\begin{leftfigure}
\begin{lstlisting}
{\addfontfeature{Ligatures=DiscretionaryOff}...}
\end{lstlisting}
\end{leftfigure}
would do the trick.

Some words are arguably typeset better without ligatures---a classic example
is shelfful.\punckern\endnote{Knuth, \textit{The \TeX book},
(Addison-Wesley, 1986), 19.}
You can manually prevent the insertion of ligatures with an empty group,
e.g., \verb|shelf{}ful|,
or use the \texttt{selnolig} package to handle most of these cases automatically.

\subsection{Figures}

When setting figures,\punckern\footnote{\introduce{Figure}
here refers to what some might call a \introduce{numeral} or
\introduce{digit}---i.e., 0, 1, 2, 3, 4, 5, 6, 7, 8, and 9.
Typographers generally prefer the first term to the other two.}
you have two
choices to make: lining versus oldstyle,
and proportional versus tabular.
\introduce{Lining} figures, sometimes called \introduce{titling} figures,
have a similar heights to capital letters:
\begin{leftfigure}
\addfontfeature{Numbers=LowercaseOff}
A B C D 1 2 3 4
\end{leftfigure}
\introduce{Oldstyle}, or \introduce{text} figures,
share more similarities with lowercase letters:
\begin{leftfigure}
Sitting cross-legged on the floor\ldots{} 25 or 6 to 4?
\end{leftfigure}
For body text, either is a fine choice, but oldstyle figures shouldn't
be combined with capital letters:
\begin{leftfigure}
``F-15C'' looks odd, as does ``Best Of 2007''\quotekern.
\end{leftfigure}

{\addfontfeature{Numbers=LowercaseOff}
The terms \introduce{proportional} and \introduce{tabular} refer to spacing.
Tabular figures are set with a uniform width, such that 1 takes up
the same space as 8.
As their name suggests, this is great for tables and other scenarios
where figures must line up with the ones above and below them:}
\begin{leftfigure}
\addfontfeature{Numbers={Tabular,LowercaseOff}}
\begin{tabular}{l|c r}
Item & Qty. & Price \\
\hline
Gadgets & 42 & \$5.37 \\
Widgets & 18 & \$12.76 \\
\end{tabular}
\end{leftfigure}
Proportional figures are the opposite---their spacing is, well\ldots{}
\emph{proportional} to the width of the figure.
They are usually preferable in body text, where 1837
looks a bit nicer than
{\addfontfeature{Numbers=Tabular}1837}.

You can select your figures with \verb|Numbers=| and the following options:
\begin{leftfigure}
\begin{tabular}{l l}
\texttt{Numbers=} & \texttt{Lining / Uppercase} \\
 & \texttt{OldStyle / Lowercase} \\
 & \texttt{Proportional} \\
 & \texttt{Tabular / Monospaced}
\end{tabular}
\end{leftfigure}
As you may have noticed, these traits can be mixed and matched.
You can have proportional lining figures
with \verb|Numbers={Proportional,Lining}|,
or tabular oldstyle ones with \verb|Numbers={Tabular,OldStyle}|.
And, like ligatures, each option has a corresponding \verb|*Off|
variant.\punckern\footnote{This is especially useful since fonts
select figures in different ways.
Consider an example where the default figures are lining
and oldstyle figures are enabled with
\monobox{Numbers=OldStyle}.
To return to lining figures in this example,
\monobox{Numbers=Lining}
doesn't work, but
\monobox{Numbers=OldStyleOff}
does.}

Finally, some fonts provide \introduce{superior and inferior} figures,
which can be used for ordinals
(\otford{1}{st}, \otford{2}{nd} \otford{3}{rd}, \ldots),
fractions (\,\otffrac{25}{624}\,), and so on.
These have the same weight as their full-sized counterparts,
which yields a much better result than shrinking normal figures for use as
subscripts and superscripts.
(Notice how
{\addfontfeature{Numbers=LowercaseOff}%
\mbox{1\textsuperscript{st}},
\mbox{2\textsuperscript{nd}},
\mbox{3\textsuperscript{rd}},
and
\,\mbox{\textsuperscript{25}^^^^2044\textsubscript{624}}%
\,}
are too light and narrow compared to the surrounding type.)

\section{What Next?}
\begin{itemize}
\item Learn about more OpenType features supported through \texttt{fontspec},
such as stylistic sets and alternatives.
\item Experiment with letter spacing---or \introduce{tracking}---with
    the \texttt{LetterSpace} option.
    Extra tracking is unnecessary in most cases,
    but can be useful to make \textsc{small caps}
    a bit more \acronym{readable}.
\end{itemize}
